!function(a,b,c){"use strict";var d,e=b("body").data("siteRoot"),f=function(a){var d,f=a.target.value;f&&(d=b.extend({q:"*"+f+"*"},c.getData(a.delegateTarget,"autocomplete")),c.doc.trigger({type:"ajax-fetch.wb",element:a.delegateTarget,fetch:{url:e+"api/3/action/GetAutocomplete",data:d,dataType:"jsonp",jsonp:"callback"}}))},g=function(a){var c,d,e,f=b(a.delegateTarget).find(".list select :selected"),g=b(a.delegateTarget).find(".result select"),h=b(a.delegateTarget).find(".return input"),i=[];if(0==g.find('option[value="'+f.val()+'"]').length){for(g.append('<option value="'+f.val()+'">'+f.text()+"</option>"),c=g.find("option"),d=c.length,e=0;d>e;e+=1)i.push(c.get(e).value);h.val(i.join("; "))}},h=function(a){var c,d,e=b(a.delegateTarget).find(".result select :selected"),f=e.find("option"),g=b(a.delegateTarget).find(".return input"),h=[];for(e.remove(),f=b(".result select option"),c=f.length,d=0;c>d;d+=1)h.push(f.get(d).value);g.val(h.join("; "))};b("[data-autocomplete]").on("keydown",'input[type="text"]:first',function(){var a=this,b=arguments;clearTimeout(d),d=setTimeout(function(){f.apply(a,b)},500)}),b("[data-autocomplete]").on("ajax-fetched.wb",function(a){var d,e,f,g,h=b(a.delegateTarget).find(".list select"),i=a.fetch.response.result.results,j=i.length;if(h.empty(),0!==i.length)for(d=0;j>d;d+=1)e=i[d],f=e.group,f?(f=f[c.lang],g=h.find('optgroup[label="'+f+'"]'),0===g.length&&(g=b('<optgroup label="'+f+'"></optgroup>').appendTo(h))):g=h,g.append('<option value="'+e.code+'">'+e.code+" | "+e.title[c.lang]+"</option>");else h.append('<option value="">'+c.i18n("no-match")+"</option>")}),b("[data-autocomplete]").on("click","button",function(a){b(a.target).hasClass("add")?g.apply(this,arguments):b(a.target).hasClass("remove")&&h.apply(this,arguments)}),b("[data-autocomplete]").on("keydown","select",function(a){13===a.which&&g.apply(this,arguments)})}(window,jQuery,wb);
//# sourceMappingURL=autocomplete.min.js.map